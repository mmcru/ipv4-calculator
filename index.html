<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="author" content="matt crupi">

    <title> CIDR IPv4 Calculator</title>

    <!-- Bootstrap Core CSS -->
  <!-- <link href="css/bootstrap.min.css" rel="stylesheet"> -->
	<link href="css/custom.css" rel="stylesheet">

</head>

<body>
	<h3>IPv4 Subnet Calculator</h3>
	<h5>Enter an IPv4 address in CIDR notation</h5>
			<label class="tablelabel">IPv4 Address:  </label>
			<input title="XXX.XXX.XXX.XXX/XX" name="IPv4" id="ipinput" type="text" required pattern="((^|\.)((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]?\d))){4}/(?:\d|[12]\d|3[01])$">
	<table class="table table-bordered table-hover">
		<tr><td class="tablelabel">Subnet Mask:  </td><td id="subnetmask"></td></tr>
		<tr><td class="tablelabel">Subnet Bits:  </td><td id="subnetbits"></td></tr>
    <tr><td class="tablelabel">Hosts:  </td><td id="hosts"></td></tr>


    <!-- jQuery -->
    <script src="js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <!-- <script src="js/bootstrap.min.js"></script> -->

	<script>
	$(document).ready(function(){

    $("#idinput").empty();

		var noSubnet = new RegExp(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/);

		var withSubnet = new RegExp(/((^|\.)((25[0-5])|(2[0-4]\d)|(1\d\d)|([1-9]?\d))){4}\/(?:\d|[12]\d|3[012])$/);

		$("#ipinput").on('input', function() {


      //check if match with subnet notation
			if(withSubnet.test($("#ipinput").val())){
        var cidr = parseInt($("#ipinput").val().split("/")[1], 10);

        $("#subnetbits").text(cidr);

        //calculations based on cidr
        if (cidr == "32"){
          $("#subnetmask").text("255.255.255.255");
          $("#hosts").text("1")
        };
        if (cidr == "31"){
          $("#subnetmask").text("255.255.255.254");
          $("#hosts").text("2")
        };
        if (cidr == "30"){
          $("#subnetmask").text("255.255.255.252");
          $("#hosts").text("4")
        };
        if (cidr == "29"){
          $("#subnetmask").text("255.255.255.248");
          $("#hosts").text("8")
        };
        if (cidr == "28"){
          $("#subnetmask").text("255.255.255.240");
          $("#hosts").text("16")
        };
        if (cidr == "27"){
          $("#subnetmask").text("255.255.255.224");
          $("#hosts").text("32")
        };
        if (cidr == "26"){
          $("#subnetmask").text("255.255.255.192");
          $("#hosts").text("64")
        };
        if (cidr == "25"){
          $("#subnetmask").text("255.255.255.128");
          $("#hosts").text("128")
        };
        if (cidr == "24"){
          $("#subnetmask").text("255.255.255.0");
          $("#hosts").text("256")
        };
        if (cidr == "23"){
          $("#subnetmask").text("255.255.254.0");
          $("#hosts").text("512")
        };
        if (cidr == "22"){
          $("#subnetmask").text("255.255.252.0");
          $("#hosts").text("1,024")
        };
        if (cidr == "21"){
          $("#subnetmask").text("255.255.248.0");
          $("#hosts").text("2,048")
        };
        if (cidr == "20"){
          $("#subnetmask").text("255.255.240.0");
          $("#hosts").text("4,096")
        };
        if (cidr == "19"){
          $("#subnetmask").text("255.255.224.0");
          $("#hosts").text("8,192")
        };
        if (cidr == "18"){
          $("#subnetmask").text("255.255.192.0");
          $("#hosts").text("16,384")
        };
        if (cidr == "17"){
          $("#subnetmask").text("255.255.128.0");
          $("#hosts").text("32,768")
        };
        if (cidr == "16"){
          $("#subnetmask").text("255.255.0.0");
          $("#hosts").text("65,536")
        };
        if (cidr == "15"){
          $("#subnetmask").text("255.254.0.0");
          $("#hosts").text("131,072")
        };
        if (cidr == "14"){
          $("#subnetmask").text("255.252.0.0");
          $("#hosts").text("262,144")
        };
        if (cidr == "13"){
          $("#subnetmask").text("255.248.0.0");
          $("#hosts").text("524,288")
        };
        if (cidr == "12"){
          $("#subnetmask").text("255.240.0.0");
          $("#hosts").text("1,048,576")
        };
        if (cidr == "11"){
          $("#subnetmask").text("255.224.0.0");
          $("#hosts").text("2,097,152")
        };
        if (cidr == "10"){
          $("#subnetmask").text("255.192.0.0");
          $("#hosts").text("4,194,304")
        };
        if (cidr == "9"){
          $("#subnetmask").text("255.128.0.0");
          $("#hosts").text("8,388,608")
        };
        if (cidr == "8"){
          $("#subnetmask").text("255.0.0.0");
          $("#hosts").text("16,777,216")
        };
        if (cidr == "7"){
          $("#subnetmask").text("254.0.0.0");
          $("#hosts").text("33,554,432")
        };
        if (cidr == "6"){
          $("#subnetmask").text("252.0.0.0");
          $("#hosts").text("67,108,864")
        };
        if (cidr == "5"){
          $("#subnetmask").text("248.0.0.0");
          $("#hosts").text("134,217,728")
        };
        if (cidr == "4"){
          $("#subnetmask").text("240.0.0.0");
          $("#hosts").text("268,435,456")
        };
        if (cidr == "3"){
          $("#subnetmask").text("224.0.0.0");
          $("#hosts").text("536,870,912")
        };
        if (cidr == "2"){
          $("#subnetmask").text("192.0.0.0");
          $("#hosts").text("1,073,741,824")
        };
        if (cidr == "1"){
          $("#subnetmask").text("128.0.0.0");
          $("#hosts").text("2,147,483,648")
        };
        if (cidr == "0"){
          $("#subnetmask").text("0.0.0.0");
          $("#hosts").text("4,294,967,296")
        };
			}
			else{
				console.log("no match");
			}
		})
	});
	</script>

</body>

</html>
